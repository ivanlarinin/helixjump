# HelixJump
Helix Jump clone made in Unity as a gameplay showcase.


# Helix Jump - Project Readme

This project contains the C\# scripts for a Helix Jump style game in Unity.

## Table of Contents

  * [Overview](#Overview)
  * [Core Mechanics](#Core-Mechanics)
  * [Project Structure](#Project-Structure)
  * [Managers](#Managers)
  * [UI Elements](#UI-Elements)
  * [Ball Mechanics](#Ball-Mechanics)
  * [Level Generation](#Level-Generation)
  * [Utility Scripts](#Utility-Scripts)

## Overview

The project implements the core gameplay loop of Helix Jump, where a ball falls through a series of platforms with the goal of reaching the bottom. Players rotate the platforms to guide the ball through gaps while avoiding trap segments.

## Core Mechanics

  * **Ball Movement**: The `BallMovement` script handles the ball's falling and jumping behavior based on collisions.
  * **Platform Rotation**: The `MouseRotator` script allows players to rotate the helix platforms using mouse input.
  * **Level Progression**: The `LevelProgress` manager tracks the current level and handles saving/loading progress.
  * **Score Tracking**: The `ScoresCollector` manages the player's score and highest score.
  * **Dynamic Level Generation**: Levels are procedurally generated using the `LevelGenerator` script, adjusting difficulty with each new level.
  * **Color Palettes**: The `PaletteManager` applies random color schemes to the game elements for visual variety.

## Project Structure

The C\# scripts are organized into logical directories reflecting their function within the game.

## Managers

  * ### `InputManager.cs`
    Disables the `MouseRotator` script when the ball collides with a "Finish" or "Trap" segment.
  * ### `LevelProgress.cs`
    Manages the current level of the game.
      * Increments the `currentLevel` when the ball collides with a `SegmentType.Finish` segment.
      * Saves and loads the `currentLevel` using `PlayerPrefs`.
      * Includes editor-only functions for resetting progress (R key) and reloading the scene (X key).
  * ### `PaletteManager.cs`
    Manages and applies different color palettes to game elements.
      * Contains a `ColorPalette` inner class that defines colors for the ball, axis, and different segment types.
      * `ApplyRandomPalette()` selects a random palette and applies its colors to the ball and axis mesh renderers.
      * `GetSelectedPalette()` returns the currently active `ColorPalette`.
  * ### `SceneSetup.cs`
    Handles the initial setup of the game scene.
      * Applies a random color palette using `PaletteManager`.
      * Sets the splat color for `BallSplatEffect` based on the chosen palette's ball color.
      * Generates the level using `LevelGenerator` based on the `currentLevel`.
      * Positions the ball at the `LastFloorY` generated by the `LevelGenerator`.
  * ### `ScoresCollector.cs`
    Manages the player's current score and maximum score.
      * Increments `scores` when the ball collides with an `SegmentType.Empty` segment, adding `levelProgress.CurrentLevel` to the score.
      * Sets `maxScores` to the current `scores` and saves it when the ball collides with a `SegmentType.Finish` segment.
      * Loads `maxScores` from `PlayerPrefs` on `Awake`.

## UI Elements

  * ### `UIGamePanel.cs`
    Manages the display of the "Passed" and "Defeat" panels in the UI.
      * Activates the `defeatPanel` if the ball collides with a `SegmentType.Trap`.
      * Activates the `passedPanel` if the ball collides with a `SegmentType.Finish`.
  * ### `UILevelProgress.cs`
    Updates the UI elements related to level progress.
      * Displays the `currentLevelText` and `nextLevelText`.
      * Updates the `progressBar.fillAmount` based on the ball's progress through the level, specifically when it collides with `SegmentType.Empty` or `SegmentType.Finish` segments.
  * ### `UIScoreText.cs`
    Updates the UI text for the current score and max score.
      * Updates `scoreText` when the ball collides with any segment type except `SegmentType.Trap`.
      * Calls `UpdateMaxScoreDisplay()` when the ball collides with a `SegmentType.Finish` segment.
      * `UpdateMaxScoreDisplay()` updates the `maxScoreText`.

## Ball Mechanics

  * ### `BallController.cs`
    Handles the ball's collision logic and controls its movement.
      * Inherits from `OneColliderTrigger` to ensure only one collision is processed at a time.
      * Triggers `BallMovement.Fall()` when colliding with an `SegmentType.Empty` segment.
      * Triggers `BallMovement.Jump()` when colliding with an `SegmentType.Default` segment.
      * Triggers `BallMovement.Stop()` when colliding with `SegmentType.Trap` or `SegmentType.Finish` segments.
      * Invokes the `CollisionSegment` UnityEvent, passing the `SegmentType` of the collided segment.
  * ### `BallEvents.cs`
    An abstract base class for scripts that need to react to ball collision events.
      * Subscribes to the `ballController.CollisionSegment` event on `Awake` and unsubscribes on `OnDestroy`.
      * Provides a virtual `OnBallCollisionSegment()` method for derived classes to implement specific behaviors.
  * ### `BallMovement.cs`
    Controls the physical movement of the ball, including falling and jumping.
      * `Fall(float startFloorY)`: Initiates the ball's descent, setting the target `floorY` and accelerating its fall speed.
      * `Jump()`: Resets the animator speed to 1 and sets the `fallSpeed` to `fallSpeedDefault`.
      * `Stop()`: Sets the animator speed to 0, effectively stopping the ball's animation.
  * ### `BallSplatEffect.cs`
    Generates a splat effect when the ball collides with certain segments.
      * `SetSplatColor(Color color)`: Sets the color for the splat effect.
      * `GenerateSplat()`: Instantiates a `splatPrefab` at the ball's position with a slight Y offset, random rotation, and sets its color.
      * The splat is generated on collision with any segment that is *not* `SegmentType.Empty`.

## Level Generation

  * ### `Floor.cs`
    Represents a single floor in the helix level.
      * `Initialize(Color defaultColor)`: Sets all `defaultSegment` objects to the `Default` type with the given color.
      * `AddEmptySegment(int amount)`: Converts a specified `amount` of segments to `Empty` type.
      * `AddRandomTrapSegment(int amount, Color trapColor)`: Randomly converts a specified `amount` of segments to `Trap` type with the given color.
      * `SetRandomRotate()`: Applies a random Y-axis rotation to the floor.
      * `SetFinishSegment(Color finishColor)`: Converts all segments on the floor to `Finish` type with the given color.
  * ### `LevelGenerator.cs`
    Responsible for generating the helix levels dynamically.
      * `Generate(int level)`:
          * Clears any existing floors.
          * Calculates `floorAmount` based on `defaultFloorAmount` and the current `level`.
          * Adjusts the `axis` scale to match the `floorAmount`.
          * Iterates to instantiate `floorPrefab` instances, setting their positions and properties.
          * The first floor is set as a `Finish` segment.
          * Intermediate floors (not the first or last) are given random rotations, empty segments, and random trap segments.
          * The last floor is given empty segments, and its Y position is stored as `lastFloorY`.
  * ### `Segment.cs`
    Represents a single segment (piece) of a floor.
      * `SegmentType` enum: Defines the different types of segments: `Default`, `Trap`, `Empty`, `Finish`.
      * Provides methods to set the segment's type and color: `SetTrap()`, `SetEmpty()`, `SetFinish()`, `SetDefault()`.
      * The `meshRenderer.enabled` property is used to hide `Empty` segments.

## Utility Scripts

  * ### `MouseRotator.cs`
    Allows rotation of the attached GameObject based on mouse input.
      * Rotates the object around the Y-axis when the left mouse button is held down, using input from `mouseInputAxis` (e.g., "Mouse X") and `sensitive` for control.
  * ### `OneColliderTrigger.cs`
    An abstract base class designed to ensure that `OnTriggerEnter` is called only once per unique collider.
      * Uses `lastCollider` to keep track of the last collider that entered the trigger.
      * `OnOneTriggerEnter(Collider other)` is a protected virtual method that derived classes can override for their specific trigger logic.
      * `OnTriggerExit` clears the `lastCollider` when the collider exits the trigger.
  * ### `SceneHelper.cs`
    Provides utility functions for scene management.
      * `RestartLevel()`: Reloads the current scene.
      * `LoadLevel(int buildIndex)`: Loads a scene by its build index.
      * `Quit()`: Exits the application.
